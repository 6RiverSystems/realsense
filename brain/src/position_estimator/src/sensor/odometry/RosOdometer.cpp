#include "RosOdometer.hpp"

namespace srs {

////////////////////////////////////////////////////////////////////////////////////////////////////
// Public methods

////////////////////////////////////////////////////////////////////////////////////////////////////
RosOdometer::RosOdometer(string name) :
    RosSensor(name),
    sensor_()
{
    rosSubscriber_ = rosNodeHandle_.subscribe("/sensors/odometry/raw", 100,
        &RosOdometer::cbMessageReceived, this);

    reset();
}

////////////////////////////////////////////////////////////////////////////////////////////////////
RosOdometer::~RosOdometer()
{
    rosSubscriber_.shutdown();
}

////////////////////////////////////////////////////////////////////////////////////////////////////
// Private methods

////////////////////////////////////////////////////////////////////////////////////////////////////
void RosOdometer::cbMessageReceived(brain_msgs::RawOdometryConstPtr message)
{
    sensor_->push_back(message->header.stamp.nsec, message->left, message->right);
}

} // namespace srs
