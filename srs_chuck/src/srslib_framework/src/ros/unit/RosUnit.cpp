namespace srs {

////////////////////////////////////////////////////////////////////////////////////////////////////
// Public methods

////////////////////////////////////////////////////////////////////////////////////////////////////
template<class T>
RosUnit<T>::RosUnit(string name, int argc, char** argv, double refreshRate) :
    BaseRos(name, argc, argv),
    rate_(refreshRate),
    refreshRateFrequency_(refreshRate),
    previousTime_(ros::Time::now()),
    currentTime_(ros::Time::now()),
    rosNodeHandle_(name)
{
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template<class T>
RosUnit<T>::~RosUnit()
{
}

//////////////////////////////////////////////////////////////////////////////////////////////////////
template<class T>
void RosUnit<T>::run()
{
    initialize();

    while (ros::ok())
    {
        ros::spinOnce();

        previousTime_ = currentTime_;
        currentTime_ = ros::Time::now();

        execute();

        rate_.sleep();
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////
// Private methods

} // namespace srs
